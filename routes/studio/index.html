<!DOCTYPE html>
<html>

<head>
  <script
    type="text/javascript"
    src="https://unpkg.com/wasmoon@1.16.0/dist/index.js"
  ></script>
  <script type="text/javascript">
    Promise.resolve().then(async () => {
      const factory = new wasmoon.LuaFactory();
      const lua = await factory.createEngine();

      lua.global.set('sum', (x, y) => x + y)
      // Run a lua string
      await lua.doString(`
    print(sum(10, 10))
    function multiply(x, y)
        return x * y
    end
    `)
      // Get a global lua function as a JS function
      const multiply = lua.global.get('multiply')
      console.log(multiply(10, 10))

      console.log('lua', lua)
    }).catch(console.error);
  </script>
</head>

<body>

</body>

</html>